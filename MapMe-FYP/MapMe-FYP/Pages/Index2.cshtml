@page
@model IndexModel
@{
    ViewData["Title"] = "Cats";
}
<h2>@ViewData["Title"]</h2>

<!DOCTYPE html>
<html>
<head>
    <style>
        #map {
            height: 750px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB6YloPwWoNA7HcVfD1sVLQuvHqqwnLAAA&libraries=visualization&callback=initMap"></script>
    <script> 

        var locations = {
            AB: {
                center: { lat: 57.290349, lng: -2.319781 },
                population: 125010.75
            },
            AL: {
                center: { lat: 51.776472, lng: -0.286063 },
                population: 43045.24
            },
            B: {
                center: { lat: 52.5, lng: - 1.9 },
                population: 164605.73
            },
            BA: {
                center: { lat: 51.220643, lng: -2.421682 },
                population: 107349.44
            },
            BB: {
                center: { lat: 53.785140, lng: -2.335075 },
                population: 70054.99
            },
            BD: {
                center: { lat: 53.832208, lng: -1.836429 },
                population: 92352.235
            },
            BH: {
                center: { lat: 50.750196, lng: -1.892177 },
                population: 103811.95
            },
            BL: {
                center: { lat: 53.587389, lng: -2.408178 },
                population: 39366.17
            },
            BN: {
                center: { lat: 50.829721, lng: -0.113192 },
                population: 160604.88
            },
            BR: {
                center: { lat: 51.393841, lng: 0.047418 },
                population: 22854.88
            },
            BS: {
                center: { lat: 51.444790, lng: -2.631664 },
                population: 172287.11
            },
            CA: {
                center: { lat: 54.720265, lng: -3.107657 },
                population: 107198.40
            },
            CB: {
                center: { lat: 52.206342, lng: 0.209585 },
                population: 111218.57
            },
            CF: {
                center: { lat: 51.552552, lng: -3.328342 },
                population: 116984.55
            },
            CH: {
                center: { lat: 53.291691, lng: -3.023646 },
                population: 150582.88
            },
            CM: {
                center: { lat: 51.755374, lng: 0.400386 },
                population: 121651.24
            },
            CO: {
                center: { lat: 51.901052, lng: 0.931200 },
                population: 73527.42
            },
            CR: {
                center: { lat: 51.356415, lng: -0.099431 },
                population: 30070.03
            },
            CT: {
                center: { lat: 51.255775, lng: 1.231356 },
                population: 94788.56
            },
            CV: {
                center: { lat: 52.371754, lng: -1.500148 },
                population: 118746.33
            },
            CW: {
                center: { lat: 53.156965, lng: -2.458187 },
                population: 57205.35
            },
            DA: {
                center: { lat: 51.441071, lng: 0.223186 },
                population: 48462.29
            },
            DD: {
                center: { lat: 56.543588, lng: -2.853867 },
                population: 55295.911
            },
            DE: {
                center: { lat: 52.931045, lng: -1.500189 },
                population: 152807.57
            },
            DG: {
                center: { lat: 55.022046, lng: -3.885037 },
                population: 64835.97
            },
            DH: {
                center: { lat: 54.825762, lng: -1.618147 },
                population: 39348.11
            },
            DL: {
                center: { lat: 54.533087, lng: -1.668231 },
                population: 80255.42
            },
            DN: {
                center: { lat: 53.541914, lng: -0.724901 },
                population: 101208.86
            },
            DT: {
                center: { lat: 50.758729, lng: -2.485623 },
                population: 72347.01
            },
            DY: {
                center: { lat: 52.453213, lng: -2.181056 },
                population: 55538.47
            },
            E: {
                center: { lat: 51.54, lng: 0 },
                population: 37295.77
            },
            EC: {
                center: { lat: 51.520099, lng: -0.097770 },
                population: 1230.1825
            },
            EH: {
                center: { lat: 55.923894, lng: -3.228068 },
                population: 153438.15
            },
            EN: {
                center: { lat: 51.683952, lng: -0.083489 },
                population: 51886.90
            },
            EX: {
                center: { lat: 50.831909, lng: -3.675256 },
                population: 198116.07
            },
            FK: {
                center: { lat: 56.077942, lng: -3.860002 },
                population: 43011.77
            },
            FY: {
                center: { lat: 53.827555, lng: -3.020412 },
                population: 33422.88
            },
            G: {
                center: { lat: 55.866, lng: -4.257 },
                population: 131124.54
            },
            GL: {
                center: { lat: 51.832990, lng: -2.178714 },
                population: 165109.62
            },
            GU: {
                center: { lat: 51.221508, lng: -0.719732 },
                population: 159595.81
            },
            HA: {
                center: { lat: 51.586906, lng: -0.338994 },
                population: 34810.24
            },
            HD: {
                center: { lat: 53.634357, lng: -1.782040 },
                population: 32994.73
            },
            HG: {
                center: { lat: 54.042242, lng: -1.552670 },
                population: 33857.16
            },
            HP: {
                center: { lat: 51.724700, lng: -0.690324 },
                population: 82551.83
            },
            HR: {
                center: { lat: 52.068268, lng: -2.726602 },
                population: 50329.27
            },
            HS: {
                center: { lat: 57.970893, lng: -6.708819 },
                population: 3846.6385
            },
            HU: {
                center: { lat: 53.770769, lng: -0.351766 },
                population: 84427.11
            },
            HX: {
                center: { lat: 53.719583, lng: -1.895555 },
                population: 39924.31
            },
            IG: {
                center: { lat: 51.587644, lng: 0.074079 },
                population: 17937.68
            },
            IP: {
                center: { lat: 52.203548, lng: 1.083165 },
                population: 139531.72
            },
            IV: {
                center: { lat: 57.599299, lng: -4.194213 },
                population: 59164.79
            },
            KA: {
                center: { lat: 55.564126, lng: -4.604043 },
                population: 66990.28
            },
            KT: {
                center: { lat: 51.357825, lng: -0.343329 },
                population: 62267.87
            },
            KW: {
                center: { lat: 58.656301, lng: -3.288889 },
                population: 25850.29
            },
            KY: {
                center: { lat: 56.165242, lng: -3.198738 },
                population: 69595.03
            },
            L: {
                center: { lat: 53.4156, lng: -2.9593 },
                population: 75958.97
            },
            LA: {
                center: { lat: 54.172724, lng: -2.907087 },
                population: 84345.42
            },
            LD: {
                center: { lat: 52.130929, lng: -3.340382 },
                population: 21390.25
            },
            LE: {
                center: { lat: 52.643376, lng: -1.135678 },
                population: 115819.61
            },
            LL: {
                center: { lat: 53.129122, lng: -3.727496 },
                population: 163678.98
            },
            LN: {
                center: { lat: 53.255658, lng: -0.349464 },
                population: 55997.52
            },
            LS: {
                center: { lat: 53.822664, lng: -1.553735 },
                population: 122341.19
            },
            LU: {
                center: { lat: 51.896248, lng: -0.501755 },
                population: 33739.00
            },
            M: {
                center: { lat: 53.48, lng: - 2.25 },
                population: 77755.788
            },
            ME: {
                center: { lat: 51.332462, lng: 0.588205 },
                population: 88588.15
            },
            MK: {
                center: { lat: 52.063432, lng: -0.661359 },
                population: 79269.895
            },
            ML: {
                center: { lat: 55.774883, lng: -3.940563 },
                population: 60109.42
            },
            N: {
                center: { lat: 51.6, lng: - 0.12 },
                population: 49831.32
            },
            NE: {
                center: { lat: 55.041674, lng: -1.650211 },
                population: 182414.35
            },
            NG: {
                center: { lat: 53.010209, lng: -1.064325 },
                population: 187306.49
            },
            NN: {
                center: { lat: 52.296480, lng: -0.834507 },
                population: 103801.22
            },
            NP: {
                center: { lat: 51.683712, lng: -3.019313 },
                population: 83970.38
            },
            NR: {
                center: { lat: 52.647783, lng: 1.336314 },
                population: 169819.11
            },
            NW: {
                center: { lat: 51.555115, lng: -0.196190 },
                population: 37174.12
            },
            OL: {
                center: { lat: 53.583590, lng: -2.124637 },
                population: 41785.09
            },
            OX: {
                center: { lat: 51.791785, lng: -1.293300 },
                population: 161685.78
            },
            PA: {
                center: { lat: 55.921833, lng: -4.788981 },
                population: 57501.12
            },
            PE: {
                center: { lat: 52.670160, lng: -0.009440 },
                population: 146912.86
            },
            PH: {
                center: { lat: 56.570543, lng: -3.736665 },
                population: 38013.05
            },
            PL: {
                center: { lat: 50.431497, lng: -4.341010 },
                population: 126083.63
            },
            PO: {
                center: { lat: 50.800099, lng: -1.047500 },
                population: 147431.40
            },
            PR: {
                center: { lat: 53.724037, lng: -2.754604 },
                population: 85495.51
            },
            RG: {
                center: { lat: 51.402999, lng: -1.034270 },
                population: 155882.05
            },
            RH: {
                center: { lat: 51.108474, lng: -0.209620 },
                population: 110441.07
            },
            RM: {
                center: { lat: 51.548675, lng: 0.217798 },
                population: 41415.02
            },
            S: {
                center: { lat: 53.359, lng: - 1.366 },
                population: 146505.12
            },
            SA: {
                center: { lat: 51.771411, lng: -4.224738 },
                population: 206129.32
            },
            SE: {
                center: { lat: 51.466677, lng: -0.033117 },
                population: 39329.72
            },
            SG: {
                center: { lat: 51.951161, lng: -0.157727 },
                population: 87566.08
            },
            SK: {
                center: { lat: 53.370094, lng: -2.098658 },
                population: 101983.31
            },
            SL: {
                center: { lat: 51.516210, lng: -0.643938 },
                population: 61010.533
            },
            SM: {
                center: { lat: 51.363339, lng: -0.185607 },
                population: 18822.80
            },
            SN: {
                center: { lat: 51.498724, lng: -1.906833 },
                population: 145537.29
            },
            SO: {
                center: { lat: 50.939218, lng: -1.387521 },
                population: 109815.60
            },
            SP: {
                center: { lat: 51.107026, lng: -1.789623 },
                population: 74474.70
            },
            SR: {
                center: { lat: 54.874064, lng: -1.389281 },
                population: 15776.353
            },
            SS: {
                center: { lat: 51.562712, lng: 0.596111 },
                population: 58670.69
            },
            ST: {
                center: { lat: 52.977359, lng: -2.143300 },
                population: 117051.87
            },
            SW: {
                center: { lat: 51.461567, lng: -0.168988 },
                population: 65265.339
            },
            SY: {
                center: { lat: 52.666074, lng: -3.053855 },
                population: 130564.70
            },
            TA: {
                center: { lat: 51.056685, lng: -3.069390 },
                population: 113397.86
            },
            TD: {
                center: { lat: 55.612402, lng: -2.529929 },
                population: 40976.10
            },
            TF: {
                center: { lat: 52.716189, lng: -2.460999 },
                population: 53534.19
            },
            TN: {
                center: { lat: 51.084152, lng: 0.441832 },
                population: 147953.70
            },
            TQ: {
                center: { lat: 50.457000, lng: -3.621568 },
                population: 80174.46
            },
            TR: {
                center: { lat: 50.210307, lng: -5.245763 },
                population: 94717.56
            },
            TS: {
                center: { lat: 54.584852, lng: -1.221442 },
                population: 67891.43
            },
            TW: {
                center: { lat: 51.446876, lng: -0.392389 },
                population: 58864.47
            },
            UB: {
                center: { lat: 51.529003, lng: -0.416846 },
                population: 24917.70
            },
            W: {
                center: { lat: 51.5, lng: - 0.23 },
                population: 38495.82
            },
            WA: {
                center: { lat: 53.391239, lng: -2.596829 },
                population: 88223.91
            },
            WC: {
                center: { lat: 51.519091, lng: -0.121711 },
                population: 1431.8597
            },
            WD: {
                center: { lat: 51.661073, lng: -0.389953 },
                population: 35412.45
            },
            WF: {
                center: { lat: 53.685304, lng: -1.493759 },
                population: 71847.17
            },
            WN: {
                center: { lat: 53.533854, lng: -2.636613 },
                population: 34215.82
            },
            WR: {
                center: { lat: 52.165733, lng: -2.186318 },
                population: 74054.77
            },
            WS: {
                center: { lat: 52.648306, lng: -1.954995 },
                population: 63295.59
            },
            WV: {
                center: { lat: 52.580178, lng: -2.168769 },
                population: 51128.73
            },
            YO: {
                center: { lat: 54.071163, lng: -0.844066 },
                population: 148131.23
            },
            ZE: {
                center: { lat: 60.226824, lng: -1.201881 },
                population: 6586.86
            }
        };

        var firebase = new Firebase("https://mapme-fyp.firebaseio.com/");
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: 54.9, lng: -2.5 },
                zoom: 6,
                styles: [{
                    featureType: 'poi',
                    stylers: [{ visibility: 'off' }]
                }, {
                    featureType: 'transit.station',
                    stylers: [{ visibility: 'off' }]
                }],
                disableDoubleClickZoom: true
            });

            for (var location in locations) {
                // Add the circle for this postcode to the map.
                var postcodeCircle = new google.maps.Circle({
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 1,
                    fillColor: '#FF0000',
                    fillOpacity: 0.1,
                    map: map,
                    center: locations[location].center,
                    radius: Math.sqrt(locations[location].population) * 50,
                    name: locations.location,
                    population: locations[location].population,
                    clickable: true
                });
            }

            var infoWindow = new google.maps.InfoWindow({
                content: '<div><strong>' + locations.location + '</strong><br>' + 'Cat Population: ' + locations[location].population + '</div>'
            });

            google.maps.event.addListener(postcodeCircle, 'click', function (ev) {
                infoWindow.setPosition(ev.latLng);
                infoWindow.open(map);
            });
        }
    </script>
</body>
</html>